#!/bin/bash

infile=$(realpath "$@")

mkdir -p /tmp/code
if [[ "$infile" == *.zip ]]; then
	unzip "$infile" -d /tmp/code > /dev/null
else
	cp -sfr "$infile" /tmp/code
fi

# Sadly, pathname starts with slash is recognized as option
cd ~/interpreters/Folders/Rottytooth.Esolang.Folders/bin/Release && mono Folders.exe ../../../../../../../tmp/code /b 2> /dev/null && (cat - | mono code.exe) && rm code.exe

rm -rf /tmp/code
