#!/bin/bash

code=$(cat $@)

if [ -s /dev/stdin ]; then
	input=$(cat -)
	~/interpreters/sqlite3 ':memory:' "CREATE TABLE i (v); CREATE TABLE o (v); INSERT INTO i VALUES ('$input'); $code; SELECT v FROM o LIMIT 1;"
else
	~/interpreters/sqlite3 ':memory:' "CREATE TABLE i (v); CREATE TABLE o (v); INSERT INTO i VALUES (''); $code; SELECT v FROM o LIMIT 1;"
fi
